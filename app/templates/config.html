{% extends '_base.html' %}

{% block title %}DDC Configuration{% endblock %}

{% block content %}
    <div class="text-center logo-header">
        <img src="{{ url_for('static', filename='ddc_web.png') }}" alt="DDC Logo">
        <div class="ddc-title">
            <span class="neon-text-large" id="neon-ddc">DDC</span>
        </div>
    </div>
    <h2 class="text-center my-3">DockerDiscordControl</h2>
    <p class="text-center lead" style="color:#adb5bd;">Configure your DDC Bot here.</p>

    {# Donation Section #}
    <div class="text-center my-4 donation-section" id="donationSection">
        <p style="color:#adb5bd; margin-bottom: 10px;">If you find DDC helpful, consider supporting its development:</p>
        <span class="d-inline-block mx-2 align-middle">
            <a href="https://buymeacoffee.com/dockerdiscordcontrol" target="_blank" rel="noopener noreferrer" class="bmc-button donation-button" data-donation-type="coffee" title="Buy Me A Coffee">
                <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 40px !important; width: auto !important;">
            </a>
        </span>
        <span class="d-inline-block mx-2 align-middle">
            <a href="https://www.paypal.com/donate/?hosted_button_id=XKVC6SFXU2GW4" target="_blank" rel="noopener noreferrer" class="btn btn-sm donation-button" data-donation-type="paypal" style="background-color: #0070ba; border-color: #0070ba; color: white; height: 40px; line-height: 28px;" title="Donate with PayPal">
               <i class="bi bi-paypal"></i> Donate with PayPal
            </a>
        </span>
        
        {# Thank You Overlay - Hidden by default #}
        <div id="thankYouOverlay" class="thank-you-overlay" style="display: none;">
            {# Floating Tech Elements Background #}
            <div class="floating-elements">
                <!-- Floating lightning bolts -->
                <div class="floating-lightning" style="--delay: 0s; --x: 10%; --y: 20%;">‚ö°</div>
                <div class="floating-lightning" style="--delay: 0.5s; --x: 90%; --y: 30%;">‚ö°</div>
                <div class="floating-lightning" style="--delay: 1s; --x: 15%; --y: 70%;">‚ö°</div>
                <div class="floating-lightning" style="--delay: 1.5s; --x: 85%; --y: 80%;">‚ö°</div>
                <div class="floating-lightning" style="--delay: 2s; --x: 50%; --y: 90%;">‚ö°</div>
                
                <!-- Floating gears -->
                <div class="floating-gear" style="--delay: 0.3s; --x: 20%; --y: 15%;">‚öôÔ∏è</div>
                <div class="floating-gear" style="--delay: 0.8s; --x: 80%; --y: 25%;">‚öôÔ∏è</div>
                <div class="floating-gear" style="--delay: 1.3s; --x: 25%; --y: 85%;">‚öôÔ∏è</div>
                <div class="floating-gear" style="--delay: 1.8s; --x: 75%; --y: 75%;">‚öôÔ∏è</div>
                
                <!-- Floating fire -->
                <div class="floating-fire" style="--delay: 0.2s; --x: 30%; --y: 10%;">üî•</div>
                <div class="floating-fire" style="--delay: 0.7s; --x: 70%; --y: 20%;">üî•</div>
                <div class="floating-fire" style="--delay: 1.2s; --x: 10%; --y: 60%;">üî•</div>
                <div class="floating-fire" style="--delay: 1.7s; --x: 90%; --y: 70%;">üî•</div>
                <div class="floating-fire" style="--delay: 2.2s; --x: 50%; --y: 5%;">üî•</div>
                <div class="floating-fire" style="--delay: 2.7s; --x: 40%; --y: 95%;">üî•</div>
                
                <!-- DDC Colored Tech Confetti -->
                <div class="confetti" style="--delay: 0s; --x: 20%; --color: #00ffff;"></div>
                <div class="confetti" style="--delay: 0.1s; --x: 40%; --color: #20c997;"></div>
                <div class="confetti" style="--delay: 0.2s; --x: 60%; --color: #00ffff;"></div>
                <div class="confetti" style="--delay: 0.3s; --x: 80%; --color: #20c997;"></div>
                <div class="confetti" style="--delay: 0.4s; --x: 30%; --color: #00ffff;"></div>
                <div class="confetti" style="--delay: 0.5s; --x: 70%; --color: #20c997;"></div>
            </div>
            
            <div class="thank-you-content">
                <div class="thank-you-hearts">
                    <i class="bi bi-heart-fill heart-1"></i>
                    <i class="bi bi-heart-fill heart-2"></i>
                    <i class="bi bi-heart-fill heart-3"></i>
                    <!-- Extra celebration hearts -->
                    <i class="bi bi-heart-fill heart-4"></i>
                    <i class="bi bi-heart-fill heart-5"></i>
                </div>
                
                {# 37 Laser burst effect - DDC Style #}
                <div class="celebration-burst">
                    <div class="burst-ray" style="--angle: 0deg;"></div>
                    <div class="burst-ray" style="--angle: 9.73deg;"></div>
                    <div class="burst-ray" style="--angle: 19.46deg;"></div>
                    <div class="burst-ray" style="--angle: 29.19deg;"></div>
                    <div class="burst-ray" style="--angle: 38.92deg;"></div>
                    <div class="burst-ray" style="--angle: 48.65deg;"></div>
                    <div class="burst-ray" style="--angle: 58.38deg;"></div>
                    <div class="burst-ray" style="--angle: 68.11deg;"></div>
                    <div class="burst-ray" style="--angle: 77.84deg;"></div>
                    <div class="burst-ray" style="--angle: 87.57deg;"></div>
                    <div class="burst-ray" style="--angle: 97.3deg;"></div>
                    <div class="burst-ray" style="--angle: 107.03deg;"></div>
                    <div class="burst-ray" style="--angle: 116.76deg;"></div>
                    <div class="burst-ray" style="--angle: 126.49deg;"></div>
                    <div class="burst-ray" style="--angle: 136.22deg;"></div>
                    <div class="burst-ray" style="--angle: 145.95deg;"></div>
                    <div class="burst-ray" style="--angle: 155.68deg;"></div>
                    <div class="burst-ray" style="--angle: 165.41deg;"></div>
                    <div class="burst-ray" style="--angle: 175.14deg;"></div>
                    <div class="burst-ray" style="--angle: 184.87deg;"></div>
                    <div class="burst-ray" style="--angle: 194.6deg;"></div>
                    <div class="burst-ray" style="--angle: 204.33deg;"></div>
                    <div class="burst-ray" style="--angle: 214.06deg;"></div>
                    <div class="burst-ray" style="--angle: 223.79deg;"></div>
                    <div class="burst-ray" style="--angle: 233.52deg;"></div>
                    <div class="burst-ray" style="--angle: 243.25deg;"></div>
                    <div class="burst-ray" style="--angle: 252.98deg;"></div>
                    <div class="burst-ray" style="--angle: 262.71deg;"></div>
                    <div class="burst-ray" style="--angle: 272.44deg;"></div>
                    <div class="burst-ray" style="--angle: 282.17deg;"></div>
                    <div class="burst-ray" style="--angle: 291.9deg;"></div>
                    <div class="burst-ray" style="--angle: 301.63deg;"></div>
                    <div class="burst-ray" style="--angle: 311.36deg;"></div>
                    <div class="burst-ray" style="--angle: 321.09deg;"></div>
                    <div class="burst-ray" style="--angle: 330.82deg;"></div>
                    <div class="burst-ray" style="--angle: 340.55deg;"></div>
                    <div class="burst-ray" style="--angle: 350.28deg;"></div>
                </div>
                
                <div class="thank-you-text">
                    <h2 class="thank-you-title">‚ö° THANK YOU! ‚ö°</h2>
                    <p class="thank-you-subtitle">DDC DONATION RECEIVED! ‚ö°üî•‚ö°</p>
                    <div class="thank-you-message">
                        <p class="message-line">‚ö° DDC COMMUNITY POWERED UP! ‚ö°</p>
                        <p class="message-line">üî• EPIC SUPPORT DETECTED! üî•</p>
                        <p class="message-line">üöÄ DOCKER CONTROL LEVEL: MAXIMUM! üöÄ</p>
                        <p class="small celebration-footer">‚ö° DDC LASER SYSTEM ACTIVATED! ‚ö°</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Donation Button Animations */
        .donation-button {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .donation-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .donation-button:active {
            transform: scale(0.95);
        }

        /* LASER NEON SHOW OVERLAY - DDC STYLE */
        .thank-you-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 70%, rgba(0,255,255,0.4) 0%, transparent 40%),
                radial-gradient(circle at 70% 30%, rgba(32,201,151,0.4) 0%, transparent 40%),
                radial-gradient(circle at 50% 20%, rgba(0,255,255,0.3) 0%, transparent 50%),
                radial-gradient(circle at 20% 80%, rgba(32,201,151,0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0f172a, #1e293b, #334155, #1e293b, #0f172a);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(3px);
            animation: laserShowFadeIn 1s ease-out;
            overflow: hidden;
        }
        
        @keyframes laserShowFadeIn {
            0% { opacity: 0; transform: scale(0.5); filter: brightness(0) hue-rotate(0deg); }
            50% { opacity: 0.8; transform: scale(1.1); filter: brightness(2) hue-rotate(180deg); }
            100% { opacity: 1; transform: scale(1); filter: brightness(1) hue-rotate(360deg); }
        }
        
        .thank-you-content {
            text-align: center;
            color: #00ffff;
            max-width: 800px;
            padding: 60px;
            animation: neonContentSpin 1.5s ease-out;
            text-shadow: 
                0 0 5px #00ffff,
                0 0 10px #00ffff,
                0 0 20px #20c997,
                0 0 40px #20c997;
            z-index: 10;
            position: relative;
        }
        
        @keyframes neonContentSpin {
            0% { 
                transform: scale(0.1) rotate(-360deg); 
                opacity: 0; 
                filter: hue-rotate(0deg) brightness(0) blur(30px);
                text-shadow: 0 0 100px #20c997;
            }
            25% { 
                transform: scale(0.6) rotate(-180deg); 
                opacity: 0.4; 
                filter: hue-rotate(90deg) brightness(4) blur(10px);
                text-shadow: 
                    0 0 10px #00ffff,
                    0 0 20px #00ffff,
                    0 0 40px #20c997,
                    0 0 80px #20c997;
            }
            50% { 
                transform: scale(1.3) rotate(0deg); 
                opacity: 0.8; 
                filter: hue-rotate(180deg) brightness(3) blur(3px);
                text-shadow: 
                    0 0 15px #00ffff,
                    0 0 30px #00ffff,
                    0 0 60px #20c997,
                    0 0 120px #20c997;
            }
            75% { 
                transform: scale(1.1) rotate(180deg); 
                opacity: 1; 
                filter: hue-rotate(270deg) brightness(2) blur(1px);
                text-shadow: 
                    0 0 10px #00ffff,
                    0 0 20px #20c997,
                    0 0 40px #20c997,
                    0 0 80px #00ffff;
            }
            100% { 
                transform: scale(1) rotate(360deg); 
                opacity: 1; 
                filter: hue-rotate(360deg) brightness(1) blur(0px);
                text-shadow: 
                    0 0 5px #00ffff,
                    0 0 10px #00ffff,
                    0 0 20px #20c997,
                    0 0 40px #20c997;
            }
        }

        /* Floating Hearts Animation */
        .thank-you-hearts {
            margin-bottom: 30px;
            font-size: 3rem;
            position: relative;
            height: 60px;
        }
        
        .thank-you-hearts .bi-heart-fill {
            position: absolute;
            left: 50%;
            color: #ff4081;
            animation: floatingHeart 2s ease-in-out infinite;
        }
        
        .heart-1 {
            transform: translateX(-80px);
            animation-delay: 0s;
            font-size: 2.5rem;
        }
        
        .heart-2 {
            transform: translateX(-25px);
            animation-delay: 0.3s;
            font-size: 3.5rem;
        }
        
        .heart-3 {
            transform: translateX(30px);
            animation-delay: 0.6s;
            font-size: 2.8rem;
        }
        
        .heart-4 {
            transform: translateX(-50px);
            animation-delay: 0.9s;
            font-size: 2.2rem;
        }
        
        .heart-5 {
            transform: translateX(60px);
            animation-delay: 1.2s;
            font-size: 2.6rem;
        }
        
        @keyframes floatingHeart {
            0%, 100% { transform: translateY(0px) scale(1); }
            25% { transform: translateY(-15px) scale(1.1); }
            50% { transform: translateY(-5px) scale(1.05); }
            75% { transform: translateY(-10px) scale(1.08); }
        }

        /* RIESIGE DDC NEON LASER BUCHSTABEN */
        .thank-you-title {
            font-size: 8rem;
            font-weight: 900;
            margin-bottom: 30px;
            font-family: 'Impact', 'Arial Black', sans-serif;
            letter-spacing: 8px;
            color: #ffffff;
            background: linear-gradient(45deg, #00ffff, #20c997, #00ffff, #20c997, #00ffff);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: 
                ddcLaserSpin 2.5s ease-out,
                ddcGradientFlow 4s ease-in-out infinite 2.5s;
            text-shadow: 
                0 0 5px #ffffff,
                0 0 10px #ffffff,
                0 0 20px #00ffff,
                0 0 40px #00ffff,
                0 0 80px #20c997,
                0 0 120px #20c997;
            filter: drop-shadow(0 0 30px #00ffff) drop-shadow(0 0 60px #20c997);
            /* Fallback for better readability */
            -webkit-text-stroke: 2px #00ffff;
            text-stroke: 2px #00ffff;
        }
        
        @keyframes ddcLaserSpin {
            0% { 
                transform: scale(0.1) rotate(-720deg); 
                opacity: 0; 
                filter: hue-rotate(0deg) brightness(0) blur(40px) drop-shadow(0 0 200px #20c997);
            }
            20% { 
                transform: scale(0.4) rotate(-540deg); 
                opacity: 0.3; 
                filter: hue-rotate(60deg) brightness(5) blur(20px) drop-shadow(0 0 100px #00ffff);
            }
            40% { 
                transform: scale(0.8) rotate(-360deg); 
                opacity: 0.6; 
                filter: hue-rotate(120deg) brightness(4) blur(10px) drop-shadow(0 0 80px #20c997);
            }
            60% { 
                transform: scale(1.2) rotate(-180deg); 
                opacity: 0.8; 
                filter: hue-rotate(180deg) brightness(3) blur(5px) drop-shadow(0 0 60px #00ffff);
            }
            80% { 
                transform: scale(1.1) rotate(0deg); 
                opacity: 1; 
                filter: hue-rotate(240deg) brightness(2) blur(2px) drop-shadow(0 0 40px #20c997);
            }
            100% { 
                transform: scale(1) rotate(360deg); 
                opacity: 1; 
                filter: hue-rotate(360deg) brightness(1) blur(0px) drop-shadow(0 0 30px #00ffff) drop-shadow(0 0 60px #20c997);
            }
        }
        
        @keyframes ddcGradientFlow {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 200% 50%; }
            75% { background-position: 100% 100%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes thankYouTextBounce {
            0% { transform: translateY(50px); opacity: 0; }
            60% { transform: translateY(-10px); opacity: 0.8; }
            100% { transform: translateY(0px); opacity: 1; }
        }
        
        .thank-you-subtitle {
            font-size: 1.5rem;
            margin-bottom: 25px;
            animation: thankYouSubtitleSlide 1.2s ease-out;
        }
        
        @keyframes thankYouSubtitleSlide {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0px); opacity: 1; }
        }
        
        .thank-you-message {
            font-size: 1.2rem;
            animation: thankYouMessageFade 1.5s ease-out;
        }
        
        @keyframes thankYouMessageFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .thank-you-message .small {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 10px;
        }

        /* Sparkle Effect */
        .thank-you-overlay::before {
            content: '‚ú®';
            position: absolute;
            font-size: 2rem;
            top: 20%;
            left: 20%;
            animation: sparkle 2s ease-in-out infinite;
        }
        
        .thank-you-overlay::after {
            content: '‚ú®';
            position: absolute;
            font-size: 1.5rem;
            top: 30%;
            right: 25%;
            animation: sparkle 2s ease-in-out infinite 0.7s;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }

        /* √úBERTREIBUNG: Floating Elements */
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .floating-lightning {
            position: absolute;
            font-size: 2.5rem;
            color: #00ffff;
            animation: floatingLightning 3s ease-in-out infinite;
            animation-delay: var(--delay);
            left: var(--x);
            top: var(--y);
            opacity: 0;
            text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff;
        }
        
        @keyframes floatingLightning {
            0% { opacity: 0; transform: translateY(30px) scale(0.3) rotate(-45deg); }
            15% { opacity: 1; transform: translateY(-20px) scale(1.4) rotate(0deg); }
            30% { opacity: 0.8; transform: translateY(-40px) scale(1.2) rotate(45deg); }
            50% { opacity: 1; transform: translateY(-60px) scale(1.6) rotate(90deg); }
            75% { opacity: 0.6; transform: translateY(-80px) scale(1.1) rotate(180deg); }
            100% { opacity: 0; transform: translateY(-100px) scale(0.2) rotate(360deg); }
        }
        
        .floating-gear {
            position: absolute;
            font-size: 2rem;
            color: #20c997;
            animation: floatingGears 4s ease-in-out infinite;
            animation-delay: var(--delay);
            left: var(--x);
            top: var(--y);
            opacity: 0;
            text-shadow: 0 0 15px #20c997, 0 0 30px #20c997;
        }
        
        @keyframes floatingGears {
            0% { opacity: 0; transform: scale(0.2) rotate(0deg); }
            20% { opacity: 0.8; transform: scale(1.3) rotate(120deg); }
            40% { opacity: 1; transform: scale(1.1) rotate(240deg); }
            60% { opacity: 0.9; transform: scale(1.5) rotate(360deg); }
            80% { opacity: 0.7; transform: scale(1.2) rotate(480deg); }
            100% { opacity: 0; transform: scale(0.1) rotate(720deg); }
        }
        
        .floating-fire {
            position: absolute;
            font-size: 2.2rem;
            color: #ff6b35;
            animation: floatingFire 2.8s ease-in-out infinite;
            animation-delay: var(--delay);
            left: var(--x);
            top: var(--y);
            opacity: 0;
            text-shadow: 0 0 25px #ff6b35, 0 0 50px #ff6b35;
        }
        
        @keyframes floatingFire {
            0% { opacity: 0; transform: scale(0.4) rotate(0deg) translateY(40px); }
            25% { opacity: 1; transform: scale(1.3) rotate(90deg) translateY(-30px); }
            50% { opacity: 0.9; transform: scale(1.1) rotate(180deg) translateY(-50px); }
            75% { opacity: 1; transform: scale(1.4) rotate(270deg) translateY(-70px); }
            100% { opacity: 0; transform: scale(0.2) rotate(360deg) translateY(-90px); }
        }
        
        /* KONFETTI EXPLOSION */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--color);
            animation: confettiFall 3s ease-in-out infinite;
            animation-delay: var(--delay);
            left: var(--x);
            top: -10px;
            opacity: 0;
        }
        
        @keyframes confettiFall {
            0% { opacity: 1; transform: translateY(-20px) rotateZ(0deg) scale(1); }
            10% { opacity: 1; transform: translateY(0px) rotateZ(36deg) scale(1.2); }
            20% { opacity: 0.9; transform: translateY(100px) rotateZ(72deg) scale(0.8); }
            40% { opacity: 0.8; transform: translateY(300px) rotateZ(144deg) scale(1.1); }
            60% { opacity: 0.6; transform: translateY(500px) rotateZ(216deg) scale(0.9); }
            80% { opacity: 0.3; transform: translateY(700px) rotateZ(288deg) scale(0.7); }
            100% { opacity: 0; transform: translateY(100vh) rotateZ(360deg) scale(0.5); }
        }
        
        /* BURST RAYS EXPLOSION */
        .celebration-burst {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            height: 400px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        .burst-ray {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 3px;
            height: 120px;
            background: linear-gradient(to top, transparent, #00ffff, #20c997, transparent);
            transform-origin: bottom center;
            transform: translate(-50%, -100%) rotate(var(--angle));
            animation: ddcBurstRayExplosion 2.5s ease-out;
            box-shadow: 
                0 0 10px #00ffff,
                0 0 20px #20c997;
        }
        
        @keyframes ddcBurstRayExplosion {
            0% { 
                height: 0px; 
                opacity: 0; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(0.5);
                box-shadow: 0 0 5px #00ffff;
            }
            15% { 
                height: 80px; 
                opacity: 0.8; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(1);
                box-shadow: 0 0 15px #00ffff, 0 0 30px #20c997;
            }
            30% { 
                height: 150px; 
                opacity: 1; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(1.2);
                box-shadow: 0 0 20px #00ffff, 0 0 40px #20c997;
            }
            50% { 
                height: 200px; 
                opacity: 0.9; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(1.1);
                box-shadow: 0 0 25px #00ffff, 0 0 50px #20c997;
            }
            70% { 
                height: 120px; 
                opacity: 0.7; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(0.9);
                box-shadow: 0 0 15px #00ffff, 0 0 30px #20c997;
            }
            100% { 
                height: 0px; 
                opacity: 0; 
                transform: translate(-50%, -100%) rotate(var(--angle)) scale(0.3);
                box-shadow: 0 0 5px #00ffff;
            }
        }
        
        /* Enhanced Text Animations */
        .message-line {
            opacity: 0;
            animation: messageLineAppear 0.8s ease-out forwards;
            margin: 8px 0;
            font-weight: bold;
        }
        
        .message-line:nth-child(1) { animation-delay: 1.5s; }
        .message-line:nth-child(2) { animation-delay: 1.8s; }
        .message-line:nth-child(3) { animation-delay: 2.1s; }
        
        @keyframes messageLineAppear {
            0% { opacity: 0; transform: translateX(-50px) scale(0.8); }
            50% { opacity: 1; transform: translateX(10px) scale(1.1); }
            100% { opacity: 1; transform: translateX(0px) scale(1); }
        }
        
        .celebration-footer {
            animation: celebrationFooterPulse 2s ease-in-out infinite;
            animation-delay: 2.5s;
        }
        
        @keyframes celebrationFooterPulse {
            0%, 100% { transform: scale(1); color: white; }
            50% { transform: scale(1.1); color: #ffd700; text-shadow: 0 0 20px #ffd700; }
        }


        /* Mobile Responsive */
        @media (max-width: 768px) {
            .thank-you-title { font-size: 3rem; }
            .thank-you-subtitle { font-size: 1.3rem; }
            .thank-you-message { font-size: 1.1rem; }
            .thank-you-hearts { font-size: 2.5rem; }
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const donationButtons = document.querySelectorAll('.donation-button');
            const thankYouOverlay = document.getElementById('thankYouOverlay');
            
            donationButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Store donation info in localStorage for thank you display
                    const donationType = this.getAttribute('data-donation-type');
                    const timestamp = Date.now();
                    
                    localStorage.setItem('ddcDonationClick', JSON.stringify({
                        type: donationType,
                        timestamp: timestamp
                    }));
                    
                    // Allow normal link behavior (open in new tab)
                    // No e.preventDefault() - let the browser handle the link normally
                });
            });
            
            // Check for donation return on page focus/load
            function checkForDonationReturn() {
                const donationData = localStorage.getItem('ddcDonationClick');
                if (donationData) {
                    try {
                        const data = JSON.parse(donationData);
                        const timeSinceClick = Date.now() - data.timestamp;
                        
                        // Show thank you if donation was clicked within last 10 minutes
                        if (timeSinceClick < 10 * 60 * 1000) {
                            // Clear the stored data so we don't show it again
                            localStorage.removeItem('ddcDonationClick');
                            
                            // Show the thank you overlay
                            showThankYouOverlay(data.type);
                        }
                    } catch (e) {
                        // Clean up invalid data
                        localStorage.removeItem('ddcDonationClick');
                    }
                }
            }
            
            function showThankYouOverlay(donationType) {
                thankYouOverlay.style.display = 'flex';
                
                // Add special animation based on donation type
                const content = thankYouOverlay.querySelector('.thank-you-content');
                
                if (donationType === 'coffee') {
                    content.style.animation = 'thankYouPulse 0.8s ease-out, thankYouCoffeeShake 0.3s ease-out 0.8s';
                } else if (donationType === 'paypal') {
                    content.style.animation = 'thankYouPulse 0.8s ease-out, thankYouPaypalGlow 0.5s ease-out 0.8s';
                }
                
                // Hide overlay after 6 seconds (1 second longer)
                setTimeout(() => {
                    thankYouOverlay.style.animation = 'thankYouFadeOut 0.5s ease-out';
                    setTimeout(() => {
                        thankYouOverlay.style.display = 'none';
                        thankYouOverlay.style.animation = '';
                    }, 500);
                }, 6000);
            }
            
            // Check on page load
            checkForDonationReturn();
            
            // Check when window gets focus (user returns from donation page)
            window.addEventListener('focus', function() {
                // Small delay to ensure page is fully focused
                setTimeout(checkForDonationReturn, 500);
            });
            
            // Check on visibility change (better detection for modern browsers)
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    setTimeout(checkForDonationReturn, 500);
                }
            });
            
            // Click overlay to close
            thankYouOverlay.addEventListener('click', function() {
                this.style.animation = 'thankYouFadeOut 0.5s ease-out';
                setTimeout(() => {
                    this.style.display = 'none';
                    this.style.animation = '';
                }, 500);
            });
        });
        
        // Additional animations for different donation types
        const additionalStyles = `
            @keyframes thankYouFadeOut {
                from { opacity: 1; transform: scale(1); }
                to { opacity: 0; transform: scale(0.9); }
            }
            
            @keyframes thankYouCoffeeShake {
                0%, 100% { transform: rotate(0deg); }
                25% { transform: rotate(-2deg); }
                75% { transform: rotate(2deg); }
            }
            
            @keyframes thankYouPaypalGlow {
                0%, 100% { box-shadow: 0 0 0 rgba(0,112,186,0.5); }
                50% { box-shadow: 0 0 30px rgba(0,112,186,0.8); }
            }
        `;
        
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);
    </script>

    <p class="text-center" style="color:#ffc107;"><strong>Important:</strong> After saving, the Docker container must be restarted manually (e.g., via Unraid UI or `docker restart ddc`) for the bot to apply all changes!</p>

    {# Flash Messages #}
    {% include '_flash_messages.html' %}

    {# Main form starts here #}
    <form method="POST" id="config-form">

        {# Discord Bot Settings (Token) #}
        {% include '_discord_settings.html' %}

        {# Channel Settings (Guild ID) #}
        {% include '_channel_settings.html' %}

        {# Command Permissions Table #}
        {% include '_permissions_table.html' %}

        {# Server Selection Table #}
        {% include '_server_selection.html' %}

        {# NEW: Task Scheduler Form #}
        <hr class="my-4">
        <div class="mb-3 card p-3">
            {% with active_containers=active_container_names %}
                {% include 'tasks/form.html' %}
            {% endwith %}
        </div>

        {# NEW: Task Scheduler List #}
        <hr class="my-4">
        <div class="mb-3 card p-3">
             {% with active_containers=active_container_names %}
                 {% include 'tasks/list.html' %}
             {% endwith %}
        </div>

        {# Scheduler Section - OLD, replaced by tasks/form.html #}
        {# {% include '_scheduler_section.html' %} #}

        {# Language and Timezone Settings #}
        {% include '_language_timezone_settings.html' %}

        {# NEW: Auth Settings #}
        {% include '_auth_settings.html' %}

        {# Save Button #}
        {% include '_save_button.html' %}

    </form> {# --- End of form --- #}

    {# Heartbeat Section - MOVED OUTSIDE FORM #}
    {% include '_heartbeat_section.html' %}

    <div id="save-notification"></div>

    {% include '_log_section.html' %}

    
    {# Modals #}
    {% include '_spam_protection_modal.html' %}
    {% include '_token_security_modal.html' %}
    {% include '_secure_token_modal.html' %}
    {% include '_advanced_settings_modal.html' %}
    {% include '_diagnostics_modal.html' %}

{% endblock %} {# --- End content block --- #}

{% block scripts %}
    {% include '_scripts.html' %}
{% endblock %} {# --- End scripts block --- #}